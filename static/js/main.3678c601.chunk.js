(window["webpackJsonpdtmf-tool"]=window["webpackJsonpdtmf-tool"]||[]).push([[0],{30:function(e,t,a){e.exports=a(41)},35:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(14),o=a.n(i),c=(a(35),a(55)),l=a(56),u=a(53),s=a(21),m=a(58),d=a(54),f=a(57),E=function(e){var t=e.dtmf,a=r.a.useState(.2),n=Object(s.a)(a,2),i=n[0],o=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{gutterBottom:!0},"Use this slider to set the duration of the tones."),r.a.createElement(m.a,{value:i,onChange:function(e,a){Array.isArray(a)||(o(a),t.setDuration(a))},min:.1,max:2,step:.1,valueLabelDisplay:"auto",valueLabelFormat:function(e){return"".concat(e,"s")},"aria-labelledby":"continuous-slider"}),r.a.createElement(u.a,{gutterBottom:!0},"Use this dialpad to create the corresponding DTMF tones."),r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("1")}},"1")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("2")}},"2")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("3")}},"3")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("A")}},"A"))),r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("4")}},"4")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("5")}},"5")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("6")}},"6")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("B")}},"B"))),r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("7")}},"7")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("8")}},"8")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("9")}},"9")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("C")}},"C"))),r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("*")}},"*")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("0")}},"0")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("#")}},"#")),r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.playNote("D")}},"D"))))},h=a(26),v=a(27),p=[1209,1336,1477,1633],g=[697,770,852,941],y="123A456B789C*0#D".split(""),x=function(e){var t=e.dtmf,a=Object(n.useState)("None"),i=Object(s.a)(a,2),o=i[0],c=i[1],l=function(e){c(e||"None")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{gutterBottom:!0},"You can capture the sound of your microphone. You should use a different device to generate the tones."),r.a.createElement(f.a,{variant:"contained",onClick:function(){return t.captureDTMF(l)}},"Capture Audio"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(u.a,{gutterBottom:!0},"Letter: ",o),r.a.createElement(u.a,{gutterBottom:!0},"Message: ",t.getDecodedMessage()))},k=new(function(){function e(){Object(h.a)(this,e),this.context=void 0,this.duration=void 0,this.allFreqs=void 0,this.decodedMessage=void 0,this.letterHistory=void 0,this.lastLetter=void 0,this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=.2,this.allFreqs=[].concat(g,p),this.decodedMessage="",this.letterHistory=[],this.lastLetter=null}return Object(v.a)(e,[{key:"setDuration",value:function(e){this.duration=e}},{key:"getDecodedMessage",value:function(){return this.decodedMessage}},{key:"playNote",value:function(e){var t=y.findIndex(function(t){return t===e});if(t>=0){var a=t%p.length,n=Math.floor(t/p.length);this.play(p[a],g[n])}}},{key:"captureDTMF",value:function(e){var t=this;navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(a){var n=t.context.createMediaStreamSource(a),r=t.context.createScriptProcessor(512,1,1);n.connect(r),r.connect(t.context.destination),r.onaudioprocess=function(a){var n=t.allFreqs.map(function(e){return t.goertzelMag(e,a.inputBuffer.sampleRate,a.inputBuffer.getChannelData(0))}),r=t.frequenciesToDtmf(n);t.letterHistory.push(r)>10&&t.letterHistory.splice(0,1),t.letterHistory.every(function(e){return e===t.letterHistory[0]})&&t.letterHistory[0]!==t.lastLetter&&(t.lastLetter=r,t.decodedMessage+=r||"",e(r))}})}},{key:"play",value:function(e,t){var a=this.context.createOscillator(),n=this.context.createOscillator();a.type="sine",n.type="sine";var r=this.context.createGain(),i=this.context.createGain();a.connect(r),r.connect(this.context.destination),r.gain.value=.1,r.gain.setTargetAtTime(0,this.context.currentTime+this.duration,.015),n.connect(i),i.connect(this.context.destination),i.gain.value=.1,i.gain.setTargetAtTime(0,this.context.currentTime+this.duration,.015),a.frequency.value=e,n.frequency.value=t,a.start(),n.start(),a.stop(this.context.currentTime+this.duration+.1),n.stop(this.context.currentTime+this.duration+.1)}},{key:"goertzelMag",value:function(e,t,a){for(var n=Math.floor(.5+512*e/t),r=2*Math.PI*n/512,i=Math.sin(r),o=Math.cos(r),c=2*o,l=0,u=0,s=0,m=0;m<512;m++)l=c*u-s+a[m],s=u,u=l;var d=u-s*o,f=s*i;return Math.sqrt(d*d+f*f)}},{key:"frequenciesToDtmf",value:function(e){var t=e.slice(0,4).map(function(e,t){return{index:t,freq:g[t],mag:e}}),a=e.slice(4,8).map(function(e,t){return{index:t,freq:p[t],mag:e}}),n=t.reduce(function(e,t){return e.mag>t.mag?e:t}),r=a.reduce(function(e,t){return e.mag>t.mag?e:t});if(r.mag<.05||n.mag<.05)return null;var i=4*n.index+r.index;return y[i]}}]),e}()),C=function(){return r.a.createElement(c.a,{maxWidth:"md",style:{padding:20}},r.a.createElement(l.a,{style:{padding:10}},r.a.createElement(u.a,{variant:"h3"},"DTMF Encoder/Decoder"),r.a.createElement(u.a,{gutterBottom:!0},"This tool alows you to encode or decode DTMF (dual-tone multi-frequency) signals."),r.a.createElement("br",null),r.a.createElement(u.a,{variant:"h4"},"DTMF Encoder"),r.a.createElement(E,{dtmf:k}),r.a.createElement("br",null),r.a.createElement(u.a,{variant:"h4"},"DTMF Decoder"),r.a.createElement(x,{dtmf:k}),r.a.createElement("br",null),r.a.createElement(u.a,{variant:"caption",gutterBottom:!0},"A tool by ",r.a.createElement("a",{href:"https://nicolashollmann.de/"},"Nicolas Hollmann"),".")))};o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.3678c601.chunk.js.map